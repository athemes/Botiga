"use strict";var botiga=botiga||{};botiga.single_ajax_add_to_cart={init:function(){jQuery(document).on("click",".single_add_to_cart_button",function(a){a.preventDefault();var t=jQuery(this),r=t.closest("form.cart"),a={};a["add-to-cart"]=t.val(),a=r.serializeArray().reduce(function(a,t){return a[t.name]=t.value,a},a),t.removeClass("added").addClass("loading"),jQuery.post({url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","botiga_single_ajax_add_to_cart"),data:a,success:function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"!==wc_add_to_cart_params.cart_redirect_after_add?(jQuery(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,t]),jQuery(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove(),jQuery(".woocommerce-notices-wrapper").append(a.fragments.notices),t.removeClass("loading").addClass("added")):window.location=wc_add_to_cart_params.cart_url)}})}),jQuery(".botiga-single-addtocart-wrapper .quantity .qty").on("change",this.quantityValidation)},quantityValidation:function(){var a=jQuery(this);if(!a.length)return!1;var t=""!==a.attr("min")&&parseFloat(a.attr("min")),r=""!==a.attr("max")&&parseFloat(a.attr("max")),e=""!==a.attr("step")?parseFloat(a.attr("step")):1,e=Math.floor((parseFloat(a.val())-t)/e)*e+t;return t&&e<t?(a.val(t),!1):r&&r<e?(a.val(r),!1):void a.val(e)}},jQuery(document).ready(function(){botiga.single_ajax_add_to_cart.init()});