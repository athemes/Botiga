"use strict";botiga.ajaxSearch={init:function(){var a=this,r=this,t=document.querySelectorAll(".wc-search-field, .wc-block-product-search__field");if(t.length){for(var e=0;e<t.length;e++)!function(e){t[e].setAttribute("autocomplete","off"),t[e].addEventListener("keyup",a.debounce(function(){r.searchFormHandler(t[e])},300)),t[e].addEventListener("focus",a.debounce(function(){r.searchFormHandler(t[e])},300))}(e);document.addEventListener("click",function(e){null===e.target.closest(".botiga-ajax-search__wrapper")&&r.destroy()})}},searchFormHandler:function(r){if(r.value.length<3)return!1;var t=this,e=r.value,a=r.classList,a=a.contains("wc-block-product-search__field")||a.contains("wc-search-field")?"product":"post";botiga.helpers.ajax("botiga_ajax_search_callback",botiga_ajax_search.nonce,{search_term:e,type:a,posts_per_page:botiga_ajax_search.query_args.posts_per_page,order:botiga_ajax_search.query_args.order,orderby:botiga_ajax_search.query_args.orderby,show_categories:botiga_ajax_search.query_args.show_categories},function(){var e=JSON.parse(this.response),a=r.parentNode.getElementsByClassName("botiga-ajax-search__wrapper")[0];void 0===a&&((a=document.createElement("div")).className="botiga-ajax-search__wrapper",r.parentNode.append(a),r.parentNode.classList.add("botiga-ajax-search")),a.innerHTML=e.output;e=document.querySelector(".botiga-ajax-search-products");null!==e&&t.scrollbarVisible(e)&&e.classList.add("has-scrollbar"),t.elementIsOutOfScreenHorizontal(a)&&a.classList.add("reverse"),window.dispatchEvent(new Event("botiga.ajax.search.results.loaded"))})},destroy:function(){var e=document.querySelectorAll(".botiga-ajax-search__wrapper");if(e.length)for(var a=0;a<e.length;a++)e[a].remove()},debounce:function(t,o){var n=null;return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];window.clearTimeout(n),n=window.setTimeout(function(){t.apply(null,a)},o)}},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight},elementIsOutOfScreenHorizontal:function(e){e=e.getBoundingClientRect();return e.x+e.width>window.innerWidth}},botiga.helpers.botigaDomReady(botiga.ajaxSearch.init());