!function(s){"use strict";s(document).ready(function(){var d=s("body"),a=s(".wp-header-end"),o=s(".botiga-dashboard-notice");a.length&&o.length&&(a.after(o),o.addClass("show"));var i=s(".botiga-dashboard-dismissable");i.length&&i.on("click",function(){i.parent().hide(),s.post(window.botiga_dashboard.ajax_url,{action:"botiga_dismissed_handler",nonce:window.botiga_dashboard.nonce,notice:i.data("notice")})});o=s(".botiga-dashboard-modal");o.length&&o.each(function(){var a=s(this),o=a.find(".botiga-dashboard-modal-button"),i=a.find(".botiga-dashboard-modal-close"),t=a.find(".botiga-dashboard-modal-overlay");o.on("click",function(a){a.preventDefault(),t.addClass("show"),d.addClass("botiga-dashboard-modal-opened")}),i.on("click",function(a){a.preventDefault(),d.removeClass("botiga-dashboard-modal-opened"),t.removeClass("show")}),t.on("click",function(a){a.preventDefault(),null===a.target.closest(".botiga-dashboard-modal-content")&&(d.removeClass("botiga-dashboard-modal-opened"),t.removeClass("show"))})});o=s(".botiga-dashboard-plugin-ajax-button");o.length&&o.on("click",function(a){a.preventDefault();var t=s(this),o=t.attr("href"),i=t.data("slug"),d=t.data("type"),a=t.data("path"),n=t.html();t.addClass("botiga-ajax-progress"),t.parent().siblings(".botiga-dashboard-hero-warning").remove(),"install"===d?t.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.installing):"activate"===d?t.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.activating):"deactivate"===d&&t.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.deactivating),s.post(window.botiga_dashboard.ajax_url,{action:"botiga_plugin",nonce:window.botiga_dashboard.nonce,slug:i,type:d,path:a},function(a){a.success?"install"===d?(t.html('<i class="dashicons dashicons-saved"></i>'+window.botiga_dashboard.i18n.activated),setTimeout(function(){t.html(window.botiga_dashboard.i18n.redirecting),setTimeout(function(){window.location=o},1e3)},500)):window.location=o:a.data?(t.html(n),t.parent().after('<div class="botiga-dashboard-hero-warning">'+a.data+"</div>")):(t.html(n),t.parent().after('<div class="botiga-dashboard-hero-warning">'+window.botiga_dashboard.i18n.failed_message+"</div>"))}).fail(function(a,o,i){t.html(n),t.parent().after('<div class="botiga-dashboard-hero-warning">'+window.botiga_dashboard.i18n.failed_message+"</div>")})});o=s(".botiga-dashboard-activate-button");o.length&&o.on("click",function(a){s(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.activating)});o=s(".botiga-dashboard-deactivate-button");o.length&&o.on("click",function(a){s(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.deactivating)})})}(jQuery);