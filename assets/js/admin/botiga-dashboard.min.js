!function(s){"use strict";s(document).ready(function(){var d=s("body"),a=s(".wp-header-end"),i=s(".botiga-dashboard-notice");a.length&&i.length&&(a.after(i),i.addClass("show"));var t=s(".botiga-dashboard-dismissable");t.length&&t.on("click",function(){t.parent().hide(),s.post(window.botiga_dashboard.ajax_url,{action:"botiga_dismissed_handler",nonce:window.botiga_dashboard.nonce,notice:t.data("notice")})});i=s(".botiga-license-button");i.length&&i.on("click",function(a){var i=s(this);"activate"===i.data("type")?i.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.activating):i.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.deactivating)});i=s(".botiga-dashboard-modal");i.length&&i.each(function(){var a=s(this),i=a.find(".botiga-dashboard-modal-button"),t=a.find(".botiga-dashboard-modal-close"),o=a.find(".botiga-dashboard-modal-overlay");i.on("click",function(a){a.preventDefault(),o.addClass("show"),d.addClass("botiga-dashboard-modal-opened")}),t.on("click",function(a){a.preventDefault(),d.removeClass("botiga-dashboard-modal-opened"),o.removeClass("show")}),o.on("click",function(a){a.preventDefault(),null===a.target.closest(".botiga-dashboard-modal-content")&&(d.removeClass("botiga-dashboard-modal-opened"),o.removeClass("show"))})});i=s(".botiga-dashboard-plugin-ajax-button");i.length&&i.on("click",function(a){a.preventDefault();var o=s(this),i=o.attr("href"),t=o.data("slug"),d=o.data("type"),a=o.data("path"),n=o.html();o.addClass("botiga-ajax-progress"),o.parent().siblings(".botiga-dashboard-hero-warning").remove(),"install"===d?o.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.installing):"activate"===d?o.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.activating):"deactivate"===d&&o.html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.deactivating),s.post(window.botiga_dashboard.ajax_url,{action:"botiga_plugin",nonce:window.botiga_dashboard.nonce,slug:t,type:d,path:a},function(a){a.success?"install"===d?(o.html('<i class="dashicons dashicons-saved"></i>'+window.botiga_dashboard.i18n.activated),setTimeout(function(){o.html(window.botiga_dashboard.i18n.redirecting),setTimeout(function(){window.location=i},1e3)},500)):window.location=i:a.data?(o.html(n),o.parent().after('<div class="botiga-dashboard-hero-warning">'+a.data+"</div>")):(o.html(n),o.parent().after('<div class="botiga-dashboard-hero-warning">'+window.botiga_dashboard.i18n.failed_message+"</div>"))}).fail(function(a,i,t){o.html(n),o.parent().after('<div class="botiga-dashboard-hero-warning">'+window.botiga_dashboard.i18n.failed_message+"</div>")})});i=s(".botiga-dashboard-activate-button");i.length&&i.on("click",function(a){s(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.activating)});i=s(".botiga-dashboard-deactivate-button");i.length&&i.on("click",function(a){s(this).html('<i class="dashicons dashicons-update-alt"></i>'+window.botiga_dashboard.i18n.deactivating)})})}(jQuery);