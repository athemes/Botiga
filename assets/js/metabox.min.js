"use strict";!function(o){o.fn.botigaMetabox=function(){return this.each(function(){var e=o(this),a=e.find(".botiga-metabox-tab"),t=e.find(".botiga-metabox-content");a.each(function(){var a=o(this);a.on("click",function(e){e.preventDefault(),a.addClass("active").siblings().removeClass("active"),t.eq(a.index()).addClass("active").siblings().removeClass("active")})});var i=t.find(".botiga-metabox-field-repeater");i.length&&i.each(function(){var t=o(this).find("ul");t.sortable({axis:"y",cursor:"move",helper:"original",handle:".botiga-metabox-field-repeater-move"}),i.find(".botiga-metabox-field-repeater-add").on("click",function(e){e.preventDefault();var a=t.find("li").first().clone(!0),e=a.find("input");e.attr("name",e.data("name")),a.removeClass("hidden"),t.append(a)}),i.find(".botiga-metabox-field-repeater-remove").on("click",function(e){e.preventDefault(),o(this).closest("li").remove()})});var n=t.find(".botiga-metabox-field-uploads");n.length&&n.each(function(){var a,t,i=o(this).find("ul");i.sortable({axis:"y",cursor:"move",helper:"original",handle:".botiga-metabox-field-uploads-move"}),n.find(".botiga-metabox-field-uploads-add").on("click",function(e){e.preventDefault();var a=i.find("li").first().clone(!0),e=a.find("input");e.attr("name",e.data("name")),a.removeClass("hidden"),i.append(a)}),n.find(".botiga-metabox-field-uploads-upload").on("click",function(e){e.preventDefault(),t=o(this).closest("li").find("input"),a?a.open():(a=window.wp.media({library:{type:i.data("library")||"image"}}).open()).on("select",function(){var e=a.state().get("selection").first().toJSON();t.val(e.url)})}),n.find(".botiga-metabox-field-uploads-remove").on("click",function(e){e.preventDefault(),o(this).closest("li").remove()})});a=t.find("[data-depend-on]");a.length&&a.each(function(){var a=o(this),e=t.find('[name="'+a.data("depend-on")+'"]');e.data("depend-on")||(e.on("change",function(){var e=t.find('[data-depend-on="'+a.data("depend-on")+'"]');o(this).is(":checked")?e.removeClass("botiga-metabox-field-hidden"):e.addClass("botiga-metabox-field-hidden")}),e.data("depend-on",!0))})})},o(document).ready(function(e){e(".botiga-metabox").botigaMetabox()})}(jQuery);